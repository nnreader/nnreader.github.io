import{r as c,g as e3,j as o,u as t3}from"./index-7a1d6e31.js";import{g as n3}from"./assets-92038c89.js";function $(e,t){var s=typeof Symbol=="function"&&e[Symbol.iterator];if(!s)return e;var n=s.call(e),u,i=[],r;try{for(;(t===void 0||t-- >0)&&!(u=n.next()).done;)i.push(u.value)}catch(l){r={error:l}}finally{try{u&&!u.done&&(s=n.return)&&s.call(n)}finally{if(r)throw r.error}}return i}var T=function(e){return typeof e=="function"},s3=!1;const c3=s3;function H(e,t){if(e===t)return!0;for(var s=0;s<e.length;s++)if(!Object.is(e[s],t[s]))return!1;return!0}function _(e){var t=c.useRef(e);return t.current=e,t}var o3=function(e){c3&&(T(e)||console.error("useUnmount expected parameter is a function, got ".concat(typeof e)));var t=_(e);c.useEffect(function(){return function(){t.current()}},[])};const B=o3;var i3=!!(typeof window<"u"&&window.document&&window.document.createElement);const r3=i3;function j(e,t){if(r3){if(!e)return t;var s;return T(e)?s=e():"current"in e?s=e.current:s=e,s}}var a3=function(e){return e.every(function(t){var s=j(t);if(!s)return!1;if(s.getRootNode()instanceof ShadowRoot)return!0})},l3=function(e){return e?e.getRootNode():document},u3=function(e){if(!e||!document.getRootNode)return document;var t=Array.isArray(e)?e:[e];return a3(t)?l3(j(t[0])):document};const f3=u3;var m3=function(e){var t=function(s,n,u){var i=c.useRef(!1),r=c.useRef([]),l=c.useRef([]),f=c.useRef();e(function(){var m,x=Array.isArray(u)?u:[u],v=x.map(function(g){return j(g)});if(!i.current){i.current=!0,r.current=v,l.current=n,f.current=s();return}(v.length!==r.current.length||!H(v,r.current)||!H(n,l.current))&&((m=f.current)===null||m===void 0||m.call(f),r.current=v,l.current=n,f.current=s())}),B(function(){var m;(m=f.current)===null||m===void 0||m.call(f),i.current=!1})};return t};const d3=m3;var h3=d3(c.useEffect);const O=h3;function v3(e,t,s){s===void 0&&(s="click");var n=_(e);O(function(){var u=function(l){var f=Array.isArray(t)?t:[t];f.some(function(m){var x=j(m);return!x||x.contains(l.target)})||n.current(l)},i=f3(t),r=Array.isArray(s)?s:[s];return r.forEach(function(l){return i.addEventListener(l,u)}),function(){r.forEach(function(l){return i.removeEventListener(l,u)})}},Array.isArray(s)?s:[s],t)}function x3(e){var t=c.useRef(0),s=$(c.useState(e),2),n=s[0],u=s[1],i=c.useCallback(function(r){cancelAnimationFrame(t.current),t.current=requestAnimationFrame(function(){u(r)})},[]);return B(function(){cancelAnimationFrame(t.current)}),[n,i]}function g3(e,t){t===void 0&&(t=function(){return!0});var s=$(x3(),2),n=s[0],u=s[1],i=_(t);return O(function(){var r=j(e,document);if(r){var l=function(){var f;r===document?document.scrollingElement?f={left:document.scrollingElement.scrollLeft,top:document.scrollingElement.scrollTop}:f={left:Math.max(window.pageXOffset,document.documentElement.scrollLeft,document.body.scrollLeft),top:Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)}:f={left:r.scrollLeft,top:r.scrollTop},i.current(f)&&u(f)};return l(),r.addEventListener("scroll",l),function(){r.removeEventListener("scroll",l)}}},[],e),n}var V={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function s(){for(var n=[],u=0;u<arguments.length;u++){var i=arguments[u];if(i){var r=typeof i;if(r==="string"||r==="number")n.push(i);else if(Array.isArray(i)){if(i.length){var l=s.apply(null,i);l&&n.push(l)}}else if(r==="object"){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){n.push(i.toString());continue}for(var f in i)t.call(i,f)&&i[f]&&n.push(f)}}}return n.join(" ")}e.exports?(s.default=s,e.exports=s):window.classNames=s})()})(V);var w3=V.exports;const S=e3(w3),z3="_reader_6dzsx_1",j3="_sidebar_6dzsx_5",y3="_sidebarVisible_6dzsx_17",b3="_activeSection_6dzsx_26",N3="_header_6dzsx_33",S3="_content_6dzsx_52",_3="_footer_6dzsx_67",E3="_text_6dzsx_80",M3="_nextPage_6dzsx_84",C3="_inner_6dzsx_90",k3="_toolbar_6dzsx_98",F3="_visible_6dzsx_108",I3="_navigator_6dzsx_111",d={reader:z3,sidebar:j3,sidebarVisible:y3,activeSection:b3,header:N3,content:S3,footer:_3,text:E3,nextPage:M3,inner:C3,toolbar:k3,visible:F3,navigator:I3},R3=e=>/^第\s*[^章]+\s*章/.test(e.trimStart());function L3(e){const t={name:"小说名称",description:"小说描述",sections:[]},s=e.split(`
`);for(;s.length;){const n=s.shift();R3(n)?t.sections.push({title:n.trim(),content:""}):t.sections.length===0?t.description+=n+`
`:t.sections[t.sections.length-1].content+=n+`
`}return t}function E(e){const t=c.useMemo(()=>{const n=["icon-font","icon-font-gengduo"];return e.className&&n.push(e.className),n.join(" ")},[e.className]),s=c.useMemo(()=>{const n=e.size;return{width:n,height:n,...e.style||{}}},[e.size,e.style]);return o.jsxs("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,fill:e.color,...e,className:t,style:s,children:[o.jsx("path",{d:"M288 512m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z",fill:"#ffffff"}),o.jsx("path",{d:"M512 512m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z",fill:"#ffffff"}),o.jsx("path",{d:"M736 512m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z",fill:"#ffffff"})]})}E.displayName="IconFontGengduo";E.defaultProps={size:24};const P3=c.memo(E);function M(e){const t=c.useMemo(()=>{const n=["icon-font","icon-font-shezhi"];return e.className&&n.push(e.className),n.join(" ")},[e.className]),s=c.useMemo(()=>{const n=e.size;return{width:n,height:n,...e.style||{}}},[e.size,e.style]);return o.jsxs("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,fill:e.color,...e,className:t,style:s,children:[o.jsx("path",{d:"M511.913993 607.897867c-52.980346 0-95.983874-43.003528-95.983874-95.983874s43.003528-95.983874 95.983874-95.983874 95.983874 43.003528 95.983874 95.983874S564.894339 607.897867 511.913993 607.897867zM511.913993 479.919368c-17.545439 0-31.994625 14.449185-31.994625 31.994625s14.449185 31.994625 31.994625 31.994625 31.994625-14.449185 31.994625-31.994625S529.631446 479.919368 511.913993 479.919368z",fill:"#ffffff"}),o.jsx("path",{d:"M630.947757 960.010751c-9.976818 0-19.781623-4.816395-25.802117-13.073072L531.695616 846.309424c-13.589115 0.860071-25.974131 0.860071-39.563245 0l-73.450025 100.456241c-7.912649 10.836889-21.673778 15.653284-34.574836 11.868974-34.574836-9.804804-67.429531-23.393919-97.704015-40.251302-11.69696-6.536536-18.061482-19.609609-15.997312-32.854695l19.26558-123.334117c-9.804804-8.77272-19.093566-18.061482-27.866286-27.866286l-123.334117 19.26558c-13.073072 2.064169-26.318159-4.300353-32.854695-15.997312-16.857383-30.446498-30.446498-63.301193-40.251302-97.876029-3.612296-12.901058 1.032085-26.662187 11.868974-34.574836l100.456241-73.450025c-0.516042-6.880564-0.688056-13.417101-0.688056-19.781623s0.172014-12.901058 0.688056-19.781623l-100.456241-73.450025c-10.836889-7.912649-15.653284-21.673778-11.868974-34.574836 9.804804-34.574836 23.393919-67.429531 40.251302-97.704015 6.536536-11.69696 19.781623-18.061482 32.854695-15.997312l123.334117 19.26558c8.77272-9.804804 18.061482-19.093566 27.866286-27.866286l-19.26558-123.334117c-2.064169-13.245087 4.300353-26.318159 16.169326-32.854695 30.446498-16.857383 63.301193-30.446498 97.704015-40.251302 12.901058-3.612296 26.662187 1.032085 34.574836 11.868974l73.450025 100.456241c13.589115-0.860071 25.802117-0.860071 39.563245 0l73.450025-100.456241c7.912649-10.836889 21.673778-15.48127 34.574836-11.868974 34.402822 9.804804 67.257517 23.393919 97.704015 40.251302 11.69696 6.536536 18.061482 19.609609 15.997312 32.854695l-19.26558 123.334117c9.804804 8.77272 19.093566 18.061482 27.866286 27.694272l123.334117-19.26558c13.073072-2.064169 26.318159 4.300353 32.854695 15.997312 16.857383 30.446498 30.446498 63.301193 40.423316 97.876029 3.612296 12.901058-1.032085 26.662187-11.868974 34.574836L846.309424 492.13237c0.516042 6.880564 0.688056 13.417101 0.688056 19.781623 0 6.364522-0.172014 12.901058-0.688056 19.781623l100.456241 73.450025c10.836889 7.912649 15.48127 21.673778 11.868974 34.574836-9.804804 34.574836-23.393919 67.429531-40.423316 97.876029-6.536536 11.69696-19.437594 18.061482-32.854695 15.997312L762.194524 734.500252c-8.600706 9.804804-18.061482 19.093566-27.866286 27.694272l19.26558 123.334117c2.064169 13.245087-4.300353 26.318159-15.997312 32.854695-30.274483 16.857383-63.129179 30.446498-97.704015 40.251302C636.968251 959.494709 634.044011 960.010751 630.947757 960.010751zM337.147657 872.627583c13.933143 6.70855 28.554342 12.729044 43.51957 17.889467l70.525785-96.499916c6.70855-9.288762 18.061482-14.277171 29.414413-12.901058 20.641693 2.408198 42.143457 2.408198 62.613136 0 11.868974-1.376113 22.705863 3.612296 29.414413 12.901058l70.525785 96.499916c14.965228-5.160423 29.586427-11.180917 43.51957-17.889467l-18.40551-118.345708c-1.720141-11.352931 2.752226-22.877877 11.69696-29.930455 16.341341-13.073072 31.306568-27.866286 44.207626-44.207626 7.224593-8.944734 18.40551-13.589115 29.930455-11.69696l118.345708 18.40551c6.70855-13.933143 12.729044-28.554342 17.889467-43.51957l-96.499916-70.525785c-9.288762-6.70855-14.277171-18.061482-12.901058-29.414413 1.204099-10.320847 1.892155-20.641693 1.892155-31.306568s-0.688056-20.985721-1.892155-31.306568c-1.376113-11.352931 3.612296-22.705863 12.901058-29.414413l96.499916-70.525785c-5.160423-14.965228-11.180917-29.586427-17.889467-43.51957l-118.345708 18.40551c-11.352931 1.720141-22.877877-2.752226-29.930455-11.69696-12.901058-16.169326-27.694272-31.134554-44.207626-44.207626-8.944734-7.224593-13.417101-18.577524-11.69696-29.930455L686.852343 151.372417c-13.933143-6.70855-28.554342-12.729044-43.51957-17.889467l-70.525785 96.499916c-6.70855 9.288762-17.717453 14.449185-29.414413 12.901058-20.469679-2.408198-41.971443-2.408198-62.613136 0-11.524945 1.376113-22.705863-3.612296-29.586427-12.901058l-70.525785-96.499916c-14.965228 5.160423-29.586427 11.180917-43.51957 17.889467l18.40551 118.345708c1.720141 11.352931-2.752226 22.877877-11.69696 29.930455-16.341341 12.901058-31.134554 27.866286-44.207626 44.207626-7.224593 8.944734-18.577524 13.417101-29.930455 11.69696L151.372417 337.147657c-6.70855 13.933143-12.729044 28.554342-17.889467 43.51957l96.499916 70.525785c9.288762 6.70855 14.277171 18.061482 12.901058 29.586427-1.204099 10.148833-1.892155 20.641693-1.892155 31.134554 0 10.664875 0.688056 20.985721 1.892155 31.306568 1.376113 11.524945-3.612296 22.705863-12.901058 29.586427l-96.499916 70.525785c5.160423 14.965228 11.180917 29.586427 17.889467 43.51957l118.345708-18.40551c11.352931-1.720141 22.877877 2.752226 29.930455 11.69696 12.901058 16.341341 27.694272 31.134554 44.207626 44.207626 8.944734 7.224593 13.589115 18.577524 11.69696 29.930455L337.147657 872.627583z",fill:"#ffffff"})]})}M.displayName="IconFontShezhi";M.defaultProps={size:24};const A3=c.memo(M);function C(e){const t=c.useMemo(()=>{const n=["icon-font","icon-font-liangdu"];return e.className&&n.push(e.className),n.join(" ")},[e.className]),s=c.useMemo(()=>{const n=e.size;return{width:n,height:n,...e.style||{}}},[e.size,e.style]);return o.jsx("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,fill:e.color,...e,className:t,style:s,children:o.jsx("path",{d:"M512 810.666667c164.949333 0 298.666667-133.717333 298.666667-298.666667s-133.717333-298.666667-298.666667-298.666667-298.666667 133.717333-298.666667 298.666667 133.717333 298.666667 298.666667 298.666667z m0 42.666666c-188.522667 0-341.333333-152.810667-341.333333-341.333333S323.477333 170.666667 512 170.666667s341.333333 152.810667 341.333333 341.333333-152.810667 341.333333-341.333333 341.333333zM64 533.333333a21.333333 21.333333 0 0 1 0-42.666666h42.666667a21.333333 21.333333 0 0 1 0 42.666666H64zM490.666667 64a21.333333 21.333333 0 0 1 42.666666 0v42.666667a21.333333 21.333333 0 0 1-42.666666 0V64z m0 853.333333a21.333333 21.333333 0 0 1 42.666666 0v42.666667a21.333333 21.333333 0 0 1-42.666666 0v-42.666667z m426.666666-384a21.333333 21.333333 0 0 1 0-42.666666h42.666667a21.333333 21.333333 0 0 1 0 42.666666h-42.666667zM180.138667 210.304a21.333333 21.333333 0 0 1 30.165333-30.165333l30.165333 30.165333a21.333333 21.333333 0 1 1-30.165333 30.165333L180.138667 210.304z m633.557333-30.165333a21.333333 21.333333 0 0 1 30.165333 30.165333l-30.165333 30.165333a21.333333 21.333333 0 1 1-30.165333-30.165333l30.165333-30.165333zM210.304 783.530667a21.333333 21.333333 0 1 1 30.165333 30.165333l-30.165333 30.165333a21.333333 21.333333 0 1 1-30.165333-30.165333l30.165333-30.165333z m573.226667 30.165333a21.333333 21.333333 0 1 1 30.165333-30.165333l30.165333 30.165333a21.333333 21.333333 0 0 1-30.165333 30.165333l-30.165333-30.165333z",fill:"#ffffff"})})}C.displayName="IconFontLiangdu";C.defaultProps={size:24};const H3=c.memo(C);function k(e){const t=c.useMemo(()=>{const n=["icon-font","icon-font-mulu"];return e.className&&n.push(e.className),n.join(" ")},[e.className]),s=c.useMemo(()=>{const n=e.size;return{width:n,height:n,...e.style||{}}},[e.size,e.style]);return o.jsx("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,fill:e.color,...e,className:t,style:s,children:o.jsx("path",{d:"M106.666667 192a21.333333 21.333333 0 1 0 0 42.666667h85.333333a21.333333 21.333333 0 0 0 0-42.666667H106.666667z m0 298.666667a21.333333 21.333333 0 0 0 0 42.666666h85.333333a21.333333 21.333333 0 0 0 0-42.666666H106.666667z m0 298.666666a21.333333 21.333333 0 0 0 0 42.666667h85.333333a21.333333 21.333333 0 0 0 0-42.666667H106.666667zM320 192a21.333333 21.333333 0 0 0 0 42.666667h597.333333a21.333333 21.333333 0 0 0 0-42.666667H320z m0 298.666667a21.333333 21.333333 0 0 0 0 42.666666h597.333333a21.333333 21.333333 0 0 0 0-42.666666H320z m0 298.666666a21.333333 21.333333 0 0 0 0 42.666667h597.333333a21.333333 21.333333 0 0 0 0-42.666667H320z",fill:"#ffffff"})})}k.displayName="IconFontMulu";k.defaultProps={size:24};const $3=c.memo(k);function F(e){const t=c.useMemo(()=>{const n=["icon-font","icon-font-yejianmoshi"];return e.className&&n.push(e.className),n.join(" ")},[e.className]),s=c.useMemo(()=>{const n=e.size;return{width:n,height:n,...e.style||{}}},[e.size,e.style]);return o.jsx("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,fill:e.color,...e,className:t,style:s,children:o.jsx("path",{d:"M623.709091 46.545455C826.181818 97.745455 977.454545 283.927273 977.454545 505.018182 977.454545 765.672727 768 977.454545 512 977.454545 267.636364 977.454545 67.490909 786.618182 48.872727 542.254545c-2.327273-2.327273-2.327273-4.654545-2.327272-9.30909 0-16.290909 11.636364-27.927273 27.927272-27.927273 13.963636 0 23.272727 9.309091 27.927273 20.945454 51.2 123.345455 172.218182 209.454545 311.854545 209.454546 186.181818 0 337.454545-153.6 337.454546-344.436364 0-121.018182-60.509091-225.745455-153.6-288.581818-9.309091-4.654545-16.290909-16.290909-16.290909-25.6 0-16.290909 13.963636-30.254545 27.927273-30.254545h13.963636z",fill:"#ffffff"})})}F.displayName="IconFontYejianmoshi";F.defaultProps={size:24};const T3=c.memo(F),B3=["gengduo","shezhi","liangdu","mulu","yejianmoshi"];function W(e){switch(e.name){case"gengduo":return o.jsx(P3,{...e});case"shezhi":return o.jsx(A3,{...e});case"liangdu":return o.jsx(H3,{...e});case"mulu":return o.jsx($3,{...e});case"yejianmoshi":return o.jsx(T3,{...e});default:throw new Error(`IconFont's name must one of ${JSON.stringify(B3)} but got "${e.name}"`)}}W.defaultProps={size:24};const z=c.memo(W);function W3(){const[e]=t3(),[t,s]=c.useState(null),n=g3(document),[u,i]=c.useState(""),[r,l]=c.useState(""),[f,m]=c.useState(!1),[x,v]=c.useState(!1),[g,b]=c.useState(-1),I=c.useRef(null),[R,Y]=c.useState(0),L=c.useCallback(()=>{requestAnimationFrame(()=>{Y(document.documentElement.scrollHeight)})},[]);c.useLayoutEffect(()=>{L()},[L,r]),v3(()=>{x&&v(!1)},[I.current],"click");const P=c.useMemo(()=>decodeURIComponent(atob(e.get("name"))),[e]);c.useEffect(()=>{n3(P).then(a=>s(L3(a)))},[P]);const D=c.useMemo(()=>[{label:"目录",icon:o.jsx(z,{name:"mulu",color:"#fff"}),onClick:()=>{m(!1),v(h=>!h)}},{label:"亮度",icon:o.jsx(z,{name:"liangdu",color:"#fff"}),onClick:()=>{}},{label:"夜间模式",icon:o.jsx(z,{name:"yejianmoshi",color:"#fff"}),onClick:()=>{}},{label:"设置",icon:o.jsx(z,{name:"shezhi",color:"#fff"}),onClick:()=>{}}],[]),w=c.useMemo(()=>{const a=n?.top||0,h=R-window.innerHeight;if(h===0)return 100;const y=parseInt(`${a/h*100}`);return Number.isNaN(y)?0:y},[n?.top,R]);c.useEffect(()=>{if(t){if(g===-1){i("前沿"),l(t.description??"还没有简介");return}i(t.sections[g].title),l(t.sections[g].content),window.scrollTo(0,0)}},[g,t,t?.description,t?.sections]);const X=c.useMemo(()=>r.split(`
`).map((a,h)=>o.jsx("p",{children:a.trim().replace(/\s+/g," ")},h)),[r]),G=c.useCallback(()=>{b(a=>Math.max(a-1,-1)),m(!1)},[]),N=c.useCallback(()=>{t&&(b(a=>Math.min(a+1,t.sections.length-1)),m(!1))},[t]),U=c.useCallback(a=>{const h=a.clientX,y=a.clientY,q=window.innerWidth||document.documentElement.clientWidth,J=window.innerHeight||document.documentElement.clientHeight,K=q/2,Q=J/2,A=80;Math.abs(h-K)<=A&&Math.abs(y-Q)<=A?m(p=>!p):m(!1)},[]),Z=c.useCallback(()=>{w<90||N()},[N,w]);return o.jsxs("div",{className:d.reader,children:[o.jsx("div",{ref:I,className:S(d.sidebar,x?d.sidebarVisible:void 0),children:o.jsx("ul",{children:t&&t.sections.map((a,h)=>o.jsx("li",{className:S(h===g?d.activeSection:void 0),children:o.jsx("a",{href:"javascript: ",onClick:()=>{b(h),v(!1)},children:a.title.trim().replace(/\s+/," ")})},h))})}),o.jsxs("div",{className:d.header,children:[o.jsx("span",{children:u}),o.jsx(z,{style:{marginRight:4},name:"mulu",color:"#fff",onClick:()=>v(a=>!a)}),o.jsx(z,{name:"gengduo",color:"#fff",onClick:()=>m(a=>!a)})]}),o.jsx("div",{className:d.content,onClick:U,children:X}),o.jsxs("div",{className:d.footer,onClick:Z,children:[o.jsx("div",{className:d.inner,style:{width:w+"%"}}),o.jsxs("div",{className:d.text,children:[w,"%"]}),w>90?o.jsx("div",{className:d.nextPage,children:"点击加载下一章"}):null]}),o.jsxs("div",{className:S(d.toolbar,f?d.visible:void 0),children:[o.jsxs("div",{className:d.navigator,children:[o.jsx("div",{onClick:G,children:"上一章"}),o.jsxs("div",{children:[w,"%"]}),o.jsx("div",{onClick:N,children:"下一章"})]}),o.jsx("ul",{children:D.map(a=>o.jsxs("li",{onClick:a.onClick,children:[a.icon,o.jsx("span",{children:a.label})]},a.label))})]})]})}export{W3 as default};
