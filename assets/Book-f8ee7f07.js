import{r as c,j as i,u as n3,a as s3,b as c3}from"./index-614ff694.js";import{_ as $,g as i3,c as M}from"./assets-8d605a05.js";var B=function(e){return typeof e=="function"},o3=!1;const a3=o3;function T(e,n){if(e===n)return!0;for(var s=0;s<e.length;s++)if(!Object.is(e[s],n[s]))return!1;return!0}function E(e){var n=c.useRef(e);return n.current=e,n}var r3=function(e){a3&&(B(e)||console.error("useUnmount expected parameter is a function, got ".concat(typeof e)));var n=E(e);c.useEffect(function(){return function(){n.current()}},[])};const V=r3;var l3=!!(typeof window<"u"&&window.document&&window.document.createElement);const u3=l3;function y(e,n){if(u3){if(!e)return n;var s;return B(e)?s=e():"current"in e?s=e.current:s=e,s}}var f3=function(e){return e.every(function(n){var s=y(n);if(!s)return!1;if(s.getRootNode()instanceof ShadowRoot)return!0})},m3=function(e){return e?e.getRootNode():document},d3=function(e){if(!e||!document.getRootNode)return document;var n=Array.isArray(e)?e:[e];return f3(n)?m3(y(n[0])):document};const h3=d3;var v3=function(e){var n=function(s,t,d){var f=c.useRef(!1),a=c.useRef([]),u=c.useRef([]),r=c.useRef();e(function(){var h,x=Array.isArray(d)?d:[d],v=x.map(function(b){return y(b)});if(!f.current){f.current=!0,a.current=v,u.current=t,r.current=s();return}(v.length!==a.current.length||!T(v,a.current)||!T(t,u.current))&&((h=r.current)===null||h===void 0||h.call(r),a.current=v,u.current=t,r.current=s())}),V(function(){var h;(h=r.current)===null||h===void 0||h.call(r),f.current=!1})};return n};const g3=v3;var j3=g3(c.useEffect);const W=j3;function x3(e,n,s){s===void 0&&(s="click");var t=E(e);W(function(){var d=function(u){var r=Array.isArray(n)?n:[n];r.some(function(h){var x=y(h);return!x||x.contains(u.target)})||t.current(u)},f=h3(n),a=Array.isArray(s)?s:[s];return a.forEach(function(u){return f.addEventListener(u,d)}),function(){a.forEach(function(u){return f.removeEventListener(u,d)})}},Array.isArray(s)?s:[s],n)}function w3(e){var n=c.useRef(0),s=$(c.useState(e),2),t=s[0],d=s[1],f=c.useCallback(function(a){cancelAnimationFrame(n.current),n.current=requestAnimationFrame(function(){d(a)})},[]);return V(function(){cancelAnimationFrame(n.current)}),[t,f]}function z3(e,n){n===void 0&&(n=function(){return!0});var s=$(w3(),2),t=s[0],d=s[1],f=E(n);return W(function(){var a=y(e,document);if(a){var u=function(){var r;a===document?document.scrollingElement?r={left:document.scrollingElement.scrollLeft,top:document.scrollingElement.scrollTop}:r={left:Math.max(window.pageXOffset,document.documentElement.scrollLeft,document.body.scrollLeft),top:Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)}:r={left:a.scrollLeft,top:a.scrollTop},f.current(r)&&d(r)};return u(),a.addEventListener("scroll",u),function(){a.removeEventListener("scroll",u)}}},[],e),t}const y3="_reader_i8qjj_1",b3="_sidebar_i8qjj_5",N3="_sidebarVisible_i8qjj_17",_3="_activeSection_i8qjj_26",S3="_header_i8qjj_33",M3="_content_i8qjj_52",E3="_footer_i8qjj_67",k3="_text_i8qjj_81",C3="_nextPage_i8qjj_85",P3="_inner_i8qjj_91",I3="_toolbar_i8qjj_99",L3="_visible_i8qjj_109",R3="_navigator_i8qjj_112",m={reader:y3,sidebar:b3,sidebarVisible:N3,activeSection:_3,header:S3,content:M3,footer:E3,text:k3,nextPage:C3,inner:P3,toolbar:I3,visible:L3,navigator:R3},F3=e=>/^第\s*[^章]+\s*章/.test(e.trimStart());function A3(e){const n={name:"小说名称",description:"小说描述",sections:[]},s=e.split(`
`);for(;s.length;){const t=s.shift();F3(t)?n.sections.push({title:t.trim(),content:""}):n.sections.length===0?n.description+=t+`
`:n.sections[n.sections.length-1].content+=t+`
`}return n}function k(e){const n=c.useMemo(()=>{const t=["icon-font","icon-font-gengduo"];return e.className&&t.push(e.className),t.join(" ")},[e.className]),s=c.useMemo(()=>{const t=e.size;return{width:t,height:t,...e.style||{}}},[e.size,e.style]);return i.jsxs("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,fill:e.color,...e,className:n,style:s,children:[i.jsx("path",{d:"M288 512m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z",fill:"#ffffff"}),i.jsx("path",{d:"M512 512m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z",fill:"#ffffff"}),i.jsx("path",{d:"M736 512m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z",fill:"#ffffff"})]})}k.displayName="IconFontGengduo";k.defaultProps={size:24};const H3=c.memo(k);function C(e){const n=c.useMemo(()=>{const t=["icon-font","icon-font-shezhi"];return e.className&&t.push(e.className),t.join(" ")},[e.className]),s=c.useMemo(()=>{const t=e.size;return{width:t,height:t,...e.style||{}}},[e.size,e.style]);return i.jsxs("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,fill:e.color,...e,className:n,style:s,children:[i.jsx("path",{d:"M511.913993 607.897867c-52.980346 0-95.983874-43.003528-95.983874-95.983874s43.003528-95.983874 95.983874-95.983874 95.983874 43.003528 95.983874 95.983874S564.894339 607.897867 511.913993 607.897867zM511.913993 479.919368c-17.545439 0-31.994625 14.449185-31.994625 31.994625s14.449185 31.994625 31.994625 31.994625 31.994625-14.449185 31.994625-31.994625S529.631446 479.919368 511.913993 479.919368z",fill:"#ffffff"}),i.jsx("path",{d:"M630.947757 960.010751c-9.976818 0-19.781623-4.816395-25.802117-13.073072L531.695616 846.309424c-13.589115 0.860071-25.974131 0.860071-39.563245 0l-73.450025 100.456241c-7.912649 10.836889-21.673778 15.653284-34.574836 11.868974-34.574836-9.804804-67.429531-23.393919-97.704015-40.251302-11.69696-6.536536-18.061482-19.609609-15.997312-32.854695l19.26558-123.334117c-9.804804-8.77272-19.093566-18.061482-27.866286-27.866286l-123.334117 19.26558c-13.073072 2.064169-26.318159-4.300353-32.854695-15.997312-16.857383-30.446498-30.446498-63.301193-40.251302-97.876029-3.612296-12.901058 1.032085-26.662187 11.868974-34.574836l100.456241-73.450025c-0.516042-6.880564-0.688056-13.417101-0.688056-19.781623s0.172014-12.901058 0.688056-19.781623l-100.456241-73.450025c-10.836889-7.912649-15.653284-21.673778-11.868974-34.574836 9.804804-34.574836 23.393919-67.429531 40.251302-97.704015 6.536536-11.69696 19.781623-18.061482 32.854695-15.997312l123.334117 19.26558c8.77272-9.804804 18.061482-19.093566 27.866286-27.866286l-19.26558-123.334117c-2.064169-13.245087 4.300353-26.318159 16.169326-32.854695 30.446498-16.857383 63.301193-30.446498 97.704015-40.251302 12.901058-3.612296 26.662187 1.032085 34.574836 11.868974l73.450025 100.456241c13.589115-0.860071 25.802117-0.860071 39.563245 0l73.450025-100.456241c7.912649-10.836889 21.673778-15.48127 34.574836-11.868974 34.402822 9.804804 67.257517 23.393919 97.704015 40.251302 11.69696 6.536536 18.061482 19.609609 15.997312 32.854695l-19.26558 123.334117c9.804804 8.77272 19.093566 18.061482 27.866286 27.694272l123.334117-19.26558c13.073072-2.064169 26.318159 4.300353 32.854695 15.997312 16.857383 30.446498 30.446498 63.301193 40.423316 97.876029 3.612296 12.901058-1.032085 26.662187-11.868974 34.574836L846.309424 492.13237c0.516042 6.880564 0.688056 13.417101 0.688056 19.781623 0 6.364522-0.172014 12.901058-0.688056 19.781623l100.456241 73.450025c10.836889 7.912649 15.48127 21.673778 11.868974 34.574836-9.804804 34.574836-23.393919 67.429531-40.423316 97.876029-6.536536 11.69696-19.437594 18.061482-32.854695 15.997312L762.194524 734.500252c-8.600706 9.804804-18.061482 19.093566-27.866286 27.694272l19.26558 123.334117c2.064169 13.245087-4.300353 26.318159-15.997312 32.854695-30.274483 16.857383-63.129179 30.446498-97.704015 40.251302C636.968251 959.494709 634.044011 960.010751 630.947757 960.010751zM337.147657 872.627583c13.933143 6.70855 28.554342 12.729044 43.51957 17.889467l70.525785-96.499916c6.70855-9.288762 18.061482-14.277171 29.414413-12.901058 20.641693 2.408198 42.143457 2.408198 62.613136 0 11.868974-1.376113 22.705863 3.612296 29.414413 12.901058l70.525785 96.499916c14.965228-5.160423 29.586427-11.180917 43.51957-17.889467l-18.40551-118.345708c-1.720141-11.352931 2.752226-22.877877 11.69696-29.930455 16.341341-13.073072 31.306568-27.866286 44.207626-44.207626 7.224593-8.944734 18.40551-13.589115 29.930455-11.69696l118.345708 18.40551c6.70855-13.933143 12.729044-28.554342 17.889467-43.51957l-96.499916-70.525785c-9.288762-6.70855-14.277171-18.061482-12.901058-29.414413 1.204099-10.320847 1.892155-20.641693 1.892155-31.306568s-0.688056-20.985721-1.892155-31.306568c-1.376113-11.352931 3.612296-22.705863 12.901058-29.414413l96.499916-70.525785c-5.160423-14.965228-11.180917-29.586427-17.889467-43.51957l-118.345708 18.40551c-11.352931 1.720141-22.877877-2.752226-29.930455-11.69696-12.901058-16.169326-27.694272-31.134554-44.207626-44.207626-8.944734-7.224593-13.417101-18.577524-11.69696-29.930455L686.852343 151.372417c-13.933143-6.70855-28.554342-12.729044-43.51957-17.889467l-70.525785 96.499916c-6.70855 9.288762-17.717453 14.449185-29.414413 12.901058-20.469679-2.408198-41.971443-2.408198-62.613136 0-11.524945 1.376113-22.705863-3.612296-29.586427-12.901058l-70.525785-96.499916c-14.965228 5.160423-29.586427 11.180917-43.51957 17.889467l18.40551 118.345708c1.720141 11.352931-2.752226 22.877877-11.69696 29.930455-16.341341 12.901058-31.134554 27.866286-44.207626 44.207626-7.224593 8.944734-18.577524 13.417101-29.930455 11.69696L151.372417 337.147657c-6.70855 13.933143-12.729044 28.554342-17.889467 43.51957l96.499916 70.525785c9.288762 6.70855 14.277171 18.061482 12.901058 29.586427-1.204099 10.148833-1.892155 20.641693-1.892155 31.134554 0 10.664875 0.688056 20.985721 1.892155 31.306568 1.376113 11.524945-3.612296 22.705863-12.901058 29.586427l-96.499916 70.525785c5.160423 14.965228 11.180917 29.586427 17.889467 43.51957l118.345708-18.40551c11.352931-1.720141 22.877877 2.752226 29.930455 11.69696 12.901058 16.341341 27.694272 31.134554 44.207626 44.207626 8.944734 7.224593 13.589115 18.577524 11.69696 29.930455L337.147657 872.627583z",fill:"#ffffff"})]})}C.displayName="IconFontShezhi";C.defaultProps={size:24};const q3=c.memo(C);function P(e){const n=c.useMemo(()=>{const t=["icon-font","icon-font-liangdu"];return e.className&&t.push(e.className),t.join(" ")},[e.className]),s=c.useMemo(()=>{const t=e.size;return{width:t,height:t,...e.style||{}}},[e.size,e.style]);return i.jsx("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,fill:e.color,...e,className:n,style:s,children:i.jsx("path",{d:"M512 810.666667c164.949333 0 298.666667-133.717333 298.666667-298.666667s-133.717333-298.666667-298.666667-298.666667-298.666667 133.717333-298.666667 298.666667 133.717333 298.666667 298.666667 298.666667z m0 42.666666c-188.522667 0-341.333333-152.810667-341.333333-341.333333S323.477333 170.666667 512 170.666667s341.333333 152.810667 341.333333 341.333333-152.810667 341.333333-341.333333 341.333333zM64 533.333333a21.333333 21.333333 0 0 1 0-42.666666h42.666667a21.333333 21.333333 0 0 1 0 42.666666H64zM490.666667 64a21.333333 21.333333 0 0 1 42.666666 0v42.666667a21.333333 21.333333 0 0 1-42.666666 0V64z m0 853.333333a21.333333 21.333333 0 0 1 42.666666 0v42.666667a21.333333 21.333333 0 0 1-42.666666 0v-42.666667z m426.666666-384a21.333333 21.333333 0 0 1 0-42.666666h42.666667a21.333333 21.333333 0 0 1 0 42.666666h-42.666667zM180.138667 210.304a21.333333 21.333333 0 0 1 30.165333-30.165333l30.165333 30.165333a21.333333 21.333333 0 1 1-30.165333 30.165333L180.138667 210.304z m633.557333-30.165333a21.333333 21.333333 0 0 1 30.165333 30.165333l-30.165333 30.165333a21.333333 21.333333 0 1 1-30.165333-30.165333l30.165333-30.165333zM210.304 783.530667a21.333333 21.333333 0 1 1 30.165333 30.165333l-30.165333 30.165333a21.333333 21.333333 0 1 1-30.165333-30.165333l30.165333-30.165333z m573.226667 30.165333a21.333333 21.333333 0 1 1 30.165333-30.165333l30.165333 30.165333a21.333333 21.333333 0 0 1-30.165333 30.165333l-30.165333-30.165333z",fill:"#ffffff"})})}P.displayName="IconFontLiangdu";P.defaultProps={size:24};const T3=c.memo(P);function I(e){const n=c.useMemo(()=>{const t=["icon-font","icon-font-mulu"];return e.className&&t.push(e.className),t.join(" ")},[e.className]),s=c.useMemo(()=>{const t=e.size;return{width:t,height:t,...e.style||{}}},[e.size,e.style]);return i.jsx("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,fill:e.color,...e,className:n,style:s,children:i.jsx("path",{d:"M106.666667 192a21.333333 21.333333 0 1 0 0 42.666667h85.333333a21.333333 21.333333 0 0 0 0-42.666667H106.666667z m0 298.666667a21.333333 21.333333 0 0 0 0 42.666666h85.333333a21.333333 21.333333 0 0 0 0-42.666666H106.666667z m0 298.666666a21.333333 21.333333 0 0 0 0 42.666667h85.333333a21.333333 21.333333 0 0 0 0-42.666667H106.666667zM320 192a21.333333 21.333333 0 0 0 0 42.666667h597.333333a21.333333 21.333333 0 0 0 0-42.666667H320z m0 298.666667a21.333333 21.333333 0 0 0 0 42.666666h597.333333a21.333333 21.333333 0 0 0 0-42.666666H320z m0 298.666666a21.333333 21.333333 0 0 0 0 42.666667h597.333333a21.333333 21.333333 0 0 0 0-42.666667H320z",fill:"#ffffff"})})}I.displayName="IconFontMulu";I.defaultProps={size:24};const $3=c.memo(I);function L(e){const n=c.useMemo(()=>{const t=["icon-font","icon-font-yejianmoshi"];return e.className&&t.push(e.className),t.join(" ")},[e.className]),s=c.useMemo(()=>{const t=e.size;return{width:t,height:t,...e.style||{}}},[e.size,e.style]);return i.jsx("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,fill:e.color,...e,className:n,style:s,children:i.jsx("path",{d:"M623.709091 46.545455C826.181818 97.745455 977.454545 283.927273 977.454545 505.018182 977.454545 765.672727 768 977.454545 512 977.454545 267.636364 977.454545 67.490909 786.618182 48.872727 542.254545c-2.327273-2.327273-2.327273-4.654545-2.327272-9.30909 0-16.290909 11.636364-27.927273 27.927272-27.927273 13.963636 0 23.272727 9.309091 27.927273 20.945454 51.2 123.345455 172.218182 209.454545 311.854545 209.454546 186.181818 0 337.454545-153.6 337.454546-344.436364 0-121.018182-60.509091-225.745455-153.6-288.581818-9.309091-4.654545-16.290909-16.290909-16.290909-25.6 0-16.290909 13.963636-30.254545 27.927273-30.254545h13.963636z",fill:"#ffffff"})})}L.displayName="IconFontYejianmoshi";L.defaultProps={size:24};const B3=c.memo(L),V3=["gengduo","shezhi","liangdu","mulu","yejianmoshi"];function Y(e){switch(e.name){case"gengduo":return i.jsx(H3,{...e});case"shezhi":return i.jsx(q3,{...e});case"liangdu":return i.jsx(T3,{...e});case"mulu":return i.jsx($3,{...e});case"yejianmoshi":return i.jsx(B3,{...e});default:throw new Error(`IconFont's name must one of ${JSON.stringify(V3)} but got "${e.name}"`)}}Y.defaultProps={size:24};const z=c.memo(Y);function O3(){const e=n3(),n=s3(),[s]=c3(),[t,d]=c.useState(null),f=z3(document),[a,u]=c.useState(""),[r,h]=c.useState(""),[x,v]=c.useState(!1),[b,N]=c.useState(!1),[g,_]=c.useState(s.get("index")?+s.get("index"):-1),R=c.useRef(null),[F,O]=c.useState(0),A=c.useCallback(()=>{requestAnimationFrame(()=>{O(document.documentElement.scrollHeight)})},[]);c.useLayoutEffect(()=>{A()},[A,r]),x3(()=>{b&&N(!1)},[R.current],"click");const H=c.useMemo(()=>decodeURIComponent(atob(s.get("name"))),[s]);c.useEffect(()=>{i3(H).then(o=>d(A3(o)))},[H]);const U=c.useMemo(()=>[{label:"目录",icon:i.jsx(z,{name:"mulu",color:"#fff"}),onClick:()=>{v(!1),N(l=>!l)}},{label:"亮度",icon:i.jsx(z,{name:"liangdu",color:"#fff"}),onClick:()=>{}},{label:"夜间模式",icon:i.jsx(z,{name:"yejianmoshi",color:"#fff"}),onClick:()=>{}},{label:"设置",icon:i.jsx(z,{name:"shezhi",color:"#fff"}),onClick:()=>{}}],[]),w=c.useMemo(()=>{const o=f?.top||0,l=F-window.innerHeight;if(l===0)return 100;const j=parseInt(`${o/l*100}`);return Number.isNaN(j)?0:j},[f?.top,F]);c.useEffect(()=>{if(t){if(g===-1){u("前沿"),h(t.description??"还没有简介");return}u(t.sections[g].title),h(t.sections[g].content),window.scrollTo(0,0)}},[g,t,t?.description,t?.sections]);const X=c.useMemo(()=>r.split(`
`).map((o,l)=>i.jsx("p",{children:o.trim().replace(/\s+/g," ")},l)),[r]),D=c.useMemo(()=>t?g<t.sections?.length-1:!1,[g,t]),G=c.useCallback(()=>{v(!1);const o=Math.max(g-1,-1);_(o);const l=new URLSearchParams(e.search);l.set("index",o+"");const j=l.toString();n({pathname:e.pathname,search:j})},[g,e.pathname,e.search,n]),S=c.useCallback(()=>{if(!t)return;const o=Math.min(g+1,t.sections.length-1);_(o),v(!1);const l=new URLSearchParams(e.search);l.set("index",o+"");const j=l.toString();n({pathname:e.pathname,search:j})},[g,e.pathname,e.search,n,t]),Z=c.useCallback(o=>{const l=o.clientX,j=o.clientY,K=window.innerWidth||document.documentElement.clientWidth,Q=window.innerHeight||document.documentElement.clientHeight,p=K/2,e3=Q/2,q=80;Math.abs(l-p)<=q&&Math.abs(j-e3)<=q?v(t3=>!t3):v(!1)},[]),J=c.useCallback(()=>{w<95||S()},[S,w]);return i.jsxs("div",{className:m.reader,children:[i.jsx("div",{ref:R,className:M(m.sidebar,b?m.sidebarVisible:void 0),children:i.jsx("ul",{children:t&&t.sections.map((o,l)=>i.jsx("li",{className:M(l===g?m.activeSection:void 0),children:i.jsx("a",{href:"javascript: ",onClick:()=>{_(l),N(!1)},children:o.title.trim().replace(/\s+/," ")})},l))})}),i.jsxs("div",{className:m.header,children:[i.jsx("span",{children:a}),i.jsx(z,{style:{marginRight:4},name:"mulu",color:"#fff",onClick:()=>N(o=>!o)}),i.jsx(z,{name:"gengduo",color:"#fff",onClick:()=>v(o=>!o)})]}),i.jsx("div",{className:m.content,onClick:Z,children:X}),i.jsxs("div",{className:m.footer,onClick:J,children:[i.jsx("div",{className:m.inner,style:{width:w+"%"}}),i.jsxs("div",{className:m.text,children:[w,"%"]}),w>95?i.jsx("div",{className:m.nextPage,children:D?"点击加载下一章":"已没有更多"}):null]}),i.jsxs("div",{className:M(m.toolbar,x?m.visible:void 0),children:[i.jsxs("div",{className:m.navigator,children:[i.jsx("div",{onClick:G,children:"上一章"}),i.jsxs("div",{children:[w,"%"]}),i.jsx("div",{onClick:S,children:"下一章"})]}),i.jsx("ul",{children:U.map(o=>i.jsxs("li",{onClick:o.onClick,children:[o.icon,i.jsx("span",{children:o.label})]},o.label))})]})]})}export{O3 as default};
