import{r as c,g as s3,j as i,u as c3,a as i3,b as o3}from"./index-f6f9a2ec.js";import{g as r3}from"./assets-0e3ca53d.js";function T(e,s){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var t=n.call(e),f,o=[],r;try{for(;(s===void 0||s-- >0)&&!(f=t.next()).done;)o.push(f.value)}catch(l){r={error:l}}finally{try{f&&!f.done&&(n=t.return)&&n.call(t)}finally{if(r)throw r.error}}return o}var B=function(e){return typeof e=="function"},a3=!1;const l3=a3;function $(e,s){if(e===s)return!0;for(var n=0;n<e.length;n++)if(!Object.is(e[n],s[n]))return!1;return!0}function M(e){var s=c.useRef(e);return s.current=e,s}var u3=function(e){l3&&(B(e)||console.error("useUnmount expected parameter is a function, got ".concat(typeof e)));var s=M(e);c.useEffect(function(){return function(){s.current()}},[])};const O=u3;var f3=!!(typeof window<"u"&&window.document&&window.document.createElement);const m3=f3;function z(e,s){if(m3){if(!e)return s;var n;return B(e)?n=e():"current"in e?n=e.current:n=e,n}}var d3=function(e){return e.every(function(s){var n=z(s);if(!n)return!1;if(n.getRootNode()instanceof ShadowRoot)return!0})},h3=function(e){return e?e.getRootNode():document},v3=function(e){if(!e||!document.getRootNode)return document;var s=Array.isArray(e)?e:[e];return d3(s)?h3(z(s[0])):document};const g3=v3;var j3=function(e){var s=function(n,t,f){var o=c.useRef(!1),r=c.useRef([]),l=c.useRef([]),u=c.useRef();e(function(){var h,x=Array.isArray(f)?f:[f],v=x.map(function(b){return z(b)});if(!o.current){o.current=!0,r.current=v,l.current=t,u.current=n();return}(v.length!==r.current.length||!$(v,r.current)||!$(t,l.current))&&((h=u.current)===null||h===void 0||h.call(u),r.current=v,l.current=t,u.current=n())}),O(function(){var h;(h=u.current)===null||h===void 0||h.call(u),o.current=!1})};return s};const x3=j3;var w3=x3(c.useEffect);const V=w3;function y3(e,s,n){n===void 0&&(n="click");var t=M(e);V(function(){var f=function(l){var u=Array.isArray(s)?s:[s];u.some(function(h){var x=z(h);return!x||x.contains(l.target)})||t.current(l)},o=g3(s),r=Array.isArray(n)?n:[n];return r.forEach(function(l){return o.addEventListener(l,f)}),function(){r.forEach(function(l){return o.removeEventListener(l,f)})}},Array.isArray(n)?n:[n],s)}function z3(e){var s=c.useRef(0),n=T(c.useState(e),2),t=n[0],f=n[1],o=c.useCallback(function(r){cancelAnimationFrame(s.current),s.current=requestAnimationFrame(function(){f(r)})},[]);return O(function(){cancelAnimationFrame(s.current)}),[t,o]}function b3(e,s){s===void 0&&(s=function(){return!0});var n=T(z3(),2),t=n[0],f=n[1],o=M(s);return V(function(){var r=z(e,document);if(r){var l=function(){var u;r===document?document.scrollingElement?u={left:document.scrollingElement.scrollLeft,top:document.scrollingElement.scrollTop}:u={left:Math.max(window.pageXOffset,document.documentElement.scrollLeft,document.body.scrollLeft),top:Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)}:u={left:r.scrollLeft,top:r.scrollTop},o.current(u)&&f(u)};return l(),r.addEventListener("scroll",l),function(){r.removeEventListener("scroll",l)}}},[],e),t}var W={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var s={}.hasOwnProperty;function n(){for(var t=[],f=0;f<arguments.length;f++){var o=arguments[f];if(o){var r=typeof o;if(r==="string"||r==="number")t.push(o);else if(Array.isArray(o)){if(o.length){var l=n.apply(null,o);l&&t.push(l)}}else if(r==="object"){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){t.push(o.toString());continue}for(var u in o)s.call(o,u)&&o[u]&&t.push(u)}}}return t.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(W);var S3=W.exports;const E=s3(S3),N3="_reader_i8qjj_1",_3="_sidebar_i8qjj_5",E3="_sidebarVisible_i8qjj_17",M3="_activeSection_i8qjj_26",C3="_header_i8qjj_33",k3="_content_i8qjj_52",P3="_footer_i8qjj_67",I3="_text_i8qjj_81",F3="_nextPage_i8qjj_85",L3="_inner_i8qjj_91",R3="_toolbar_i8qjj_99",A3="_visible_i8qjj_109",H3="_navigator_i8qjj_112",d={reader:N3,sidebar:_3,sidebarVisible:E3,activeSection:M3,header:C3,content:k3,footer:P3,text:I3,nextPage:F3,inner:L3,toolbar:R3,visible:A3,navigator:H3},q3=e=>/^第\s*[^章]+\s*章/.test(e.trimStart());function $3(e){const s={name:"小说名称",description:"小说描述",sections:[]},n=e.split(`
`);for(;n.length;){const t=n.shift();q3(t)?s.sections.push({title:t.trim(),content:""}):s.sections.length===0?s.description+=t+`
`:s.sections[s.sections.length-1].content+=t+`
`}return s}function C(e){const s=c.useMemo(()=>{const t=["icon-font","icon-font-gengduo"];return e.className&&t.push(e.className),t.join(" ")},[e.className]),n=c.useMemo(()=>{const t=e.size;return{width:t,height:t,...e.style||{}}},[e.size,e.style]);return i.jsxs("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,fill:e.color,...e,className:s,style:n,children:[i.jsx("path",{d:"M288 512m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z",fill:"#ffffff"}),i.jsx("path",{d:"M512 512m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z",fill:"#ffffff"}),i.jsx("path",{d:"M736 512m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z",fill:"#ffffff"})]})}C.displayName="IconFontGengduo";C.defaultProps={size:24};const T3=c.memo(C);function k(e){const s=c.useMemo(()=>{const t=["icon-font","icon-font-shezhi"];return e.className&&t.push(e.className),t.join(" ")},[e.className]),n=c.useMemo(()=>{const t=e.size;return{width:t,height:t,...e.style||{}}},[e.size,e.style]);return i.jsxs("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,fill:e.color,...e,className:s,style:n,children:[i.jsx("path",{d:"M511.913993 607.897867c-52.980346 0-95.983874-43.003528-95.983874-95.983874s43.003528-95.983874 95.983874-95.983874 95.983874 43.003528 95.983874 95.983874S564.894339 607.897867 511.913993 607.897867zM511.913993 479.919368c-17.545439 0-31.994625 14.449185-31.994625 31.994625s14.449185 31.994625 31.994625 31.994625 31.994625-14.449185 31.994625-31.994625S529.631446 479.919368 511.913993 479.919368z",fill:"#ffffff"}),i.jsx("path",{d:"M630.947757 960.010751c-9.976818 0-19.781623-4.816395-25.802117-13.073072L531.695616 846.309424c-13.589115 0.860071-25.974131 0.860071-39.563245 0l-73.450025 100.456241c-7.912649 10.836889-21.673778 15.653284-34.574836 11.868974-34.574836-9.804804-67.429531-23.393919-97.704015-40.251302-11.69696-6.536536-18.061482-19.609609-15.997312-32.854695l19.26558-123.334117c-9.804804-8.77272-19.093566-18.061482-27.866286-27.866286l-123.334117 19.26558c-13.073072 2.064169-26.318159-4.300353-32.854695-15.997312-16.857383-30.446498-30.446498-63.301193-40.251302-97.876029-3.612296-12.901058 1.032085-26.662187 11.868974-34.574836l100.456241-73.450025c-0.516042-6.880564-0.688056-13.417101-0.688056-19.781623s0.172014-12.901058 0.688056-19.781623l-100.456241-73.450025c-10.836889-7.912649-15.653284-21.673778-11.868974-34.574836 9.804804-34.574836 23.393919-67.429531 40.251302-97.704015 6.536536-11.69696 19.781623-18.061482 32.854695-15.997312l123.334117 19.26558c8.77272-9.804804 18.061482-19.093566 27.866286-27.866286l-19.26558-123.334117c-2.064169-13.245087 4.300353-26.318159 16.169326-32.854695 30.446498-16.857383 63.301193-30.446498 97.704015-40.251302 12.901058-3.612296 26.662187 1.032085 34.574836 11.868974l73.450025 100.456241c13.589115-0.860071 25.802117-0.860071 39.563245 0l73.450025-100.456241c7.912649-10.836889 21.673778-15.48127 34.574836-11.868974 34.402822 9.804804 67.257517 23.393919 97.704015 40.251302 11.69696 6.536536 18.061482 19.609609 15.997312 32.854695l-19.26558 123.334117c9.804804 8.77272 19.093566 18.061482 27.866286 27.694272l123.334117-19.26558c13.073072-2.064169 26.318159 4.300353 32.854695 15.997312 16.857383 30.446498 30.446498 63.301193 40.423316 97.876029 3.612296 12.901058-1.032085 26.662187-11.868974 34.574836L846.309424 492.13237c0.516042 6.880564 0.688056 13.417101 0.688056 19.781623 0 6.364522-0.172014 12.901058-0.688056 19.781623l100.456241 73.450025c10.836889 7.912649 15.48127 21.673778 11.868974 34.574836-9.804804 34.574836-23.393919 67.429531-40.423316 97.876029-6.536536 11.69696-19.437594 18.061482-32.854695 15.997312L762.194524 734.500252c-8.600706 9.804804-18.061482 19.093566-27.866286 27.694272l19.26558 123.334117c2.064169 13.245087-4.300353 26.318159-15.997312 32.854695-30.274483 16.857383-63.129179 30.446498-97.704015 40.251302C636.968251 959.494709 634.044011 960.010751 630.947757 960.010751zM337.147657 872.627583c13.933143 6.70855 28.554342 12.729044 43.51957 17.889467l70.525785-96.499916c6.70855-9.288762 18.061482-14.277171 29.414413-12.901058 20.641693 2.408198 42.143457 2.408198 62.613136 0 11.868974-1.376113 22.705863 3.612296 29.414413 12.901058l70.525785 96.499916c14.965228-5.160423 29.586427-11.180917 43.51957-17.889467l-18.40551-118.345708c-1.720141-11.352931 2.752226-22.877877 11.69696-29.930455 16.341341-13.073072 31.306568-27.866286 44.207626-44.207626 7.224593-8.944734 18.40551-13.589115 29.930455-11.69696l118.345708 18.40551c6.70855-13.933143 12.729044-28.554342 17.889467-43.51957l-96.499916-70.525785c-9.288762-6.70855-14.277171-18.061482-12.901058-29.414413 1.204099-10.320847 1.892155-20.641693 1.892155-31.306568s-0.688056-20.985721-1.892155-31.306568c-1.376113-11.352931 3.612296-22.705863 12.901058-29.414413l96.499916-70.525785c-5.160423-14.965228-11.180917-29.586427-17.889467-43.51957l-118.345708 18.40551c-11.352931 1.720141-22.877877-2.752226-29.930455-11.69696-12.901058-16.169326-27.694272-31.134554-44.207626-44.207626-8.944734-7.224593-13.417101-18.577524-11.69696-29.930455L686.852343 151.372417c-13.933143-6.70855-28.554342-12.729044-43.51957-17.889467l-70.525785 96.499916c-6.70855 9.288762-17.717453 14.449185-29.414413 12.901058-20.469679-2.408198-41.971443-2.408198-62.613136 0-11.524945 1.376113-22.705863-3.612296-29.586427-12.901058l-70.525785-96.499916c-14.965228 5.160423-29.586427 11.180917-43.51957 17.889467l18.40551 118.345708c1.720141 11.352931-2.752226 22.877877-11.69696 29.930455-16.341341 12.901058-31.134554 27.866286-44.207626 44.207626-7.224593 8.944734-18.577524 13.417101-29.930455 11.69696L151.372417 337.147657c-6.70855 13.933143-12.729044 28.554342-17.889467 43.51957l96.499916 70.525785c9.288762 6.70855 14.277171 18.061482 12.901058 29.586427-1.204099 10.148833-1.892155 20.641693-1.892155 31.134554 0 10.664875 0.688056 20.985721 1.892155 31.306568 1.376113 11.524945-3.612296 22.705863-12.901058 29.586427l-96.499916 70.525785c5.160423 14.965228 11.180917 29.586427 17.889467 43.51957l118.345708-18.40551c11.352931-1.720141 22.877877 2.752226 29.930455 11.69696 12.901058 16.341341 27.694272 31.134554 44.207626 44.207626 8.944734 7.224593 13.589115 18.577524 11.69696 29.930455L337.147657 872.627583z",fill:"#ffffff"})]})}k.displayName="IconFontShezhi";k.defaultProps={size:24};const B3=c.memo(k);function P(e){const s=c.useMemo(()=>{const t=["icon-font","icon-font-liangdu"];return e.className&&t.push(e.className),t.join(" ")},[e.className]),n=c.useMemo(()=>{const t=e.size;return{width:t,height:t,...e.style||{}}},[e.size,e.style]);return i.jsx("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,fill:e.color,...e,className:s,style:n,children:i.jsx("path",{d:"M512 810.666667c164.949333 0 298.666667-133.717333 298.666667-298.666667s-133.717333-298.666667-298.666667-298.666667-298.666667 133.717333-298.666667 298.666667 133.717333 298.666667 298.666667 298.666667z m0 42.666666c-188.522667 0-341.333333-152.810667-341.333333-341.333333S323.477333 170.666667 512 170.666667s341.333333 152.810667 341.333333 341.333333-152.810667 341.333333-341.333333 341.333333zM64 533.333333a21.333333 21.333333 0 0 1 0-42.666666h42.666667a21.333333 21.333333 0 0 1 0 42.666666H64zM490.666667 64a21.333333 21.333333 0 0 1 42.666666 0v42.666667a21.333333 21.333333 0 0 1-42.666666 0V64z m0 853.333333a21.333333 21.333333 0 0 1 42.666666 0v42.666667a21.333333 21.333333 0 0 1-42.666666 0v-42.666667z m426.666666-384a21.333333 21.333333 0 0 1 0-42.666666h42.666667a21.333333 21.333333 0 0 1 0 42.666666h-42.666667zM180.138667 210.304a21.333333 21.333333 0 0 1 30.165333-30.165333l30.165333 30.165333a21.333333 21.333333 0 1 1-30.165333 30.165333L180.138667 210.304z m633.557333-30.165333a21.333333 21.333333 0 0 1 30.165333 30.165333l-30.165333 30.165333a21.333333 21.333333 0 1 1-30.165333-30.165333l30.165333-30.165333zM210.304 783.530667a21.333333 21.333333 0 1 1 30.165333 30.165333l-30.165333 30.165333a21.333333 21.333333 0 1 1-30.165333-30.165333l30.165333-30.165333z m573.226667 30.165333a21.333333 21.333333 0 1 1 30.165333-30.165333l30.165333 30.165333a21.333333 21.333333 0 0 1-30.165333 30.165333l-30.165333-30.165333z",fill:"#ffffff"})})}P.displayName="IconFontLiangdu";P.defaultProps={size:24};const O3=c.memo(P);function I(e){const s=c.useMemo(()=>{const t=["icon-font","icon-font-mulu"];return e.className&&t.push(e.className),t.join(" ")},[e.className]),n=c.useMemo(()=>{const t=e.size;return{width:t,height:t,...e.style||{}}},[e.size,e.style]);return i.jsx("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,fill:e.color,...e,className:s,style:n,children:i.jsx("path",{d:"M106.666667 192a21.333333 21.333333 0 1 0 0 42.666667h85.333333a21.333333 21.333333 0 0 0 0-42.666667H106.666667z m0 298.666667a21.333333 21.333333 0 0 0 0 42.666666h85.333333a21.333333 21.333333 0 0 0 0-42.666666H106.666667z m0 298.666666a21.333333 21.333333 0 0 0 0 42.666667h85.333333a21.333333 21.333333 0 0 0 0-42.666667H106.666667zM320 192a21.333333 21.333333 0 0 0 0 42.666667h597.333333a21.333333 21.333333 0 0 0 0-42.666667H320z m0 298.666667a21.333333 21.333333 0 0 0 0 42.666666h597.333333a21.333333 21.333333 0 0 0 0-42.666666H320z m0 298.666666a21.333333 21.333333 0 0 0 0 42.666667h597.333333a21.333333 21.333333 0 0 0 0-42.666667H320z",fill:"#ffffff"})})}I.displayName="IconFontMulu";I.defaultProps={size:24};const V3=c.memo(I);function F(e){const s=c.useMemo(()=>{const t=["icon-font","icon-font-yejianmoshi"];return e.className&&t.push(e.className),t.join(" ")},[e.className]),n=c.useMemo(()=>{const t=e.size;return{width:t,height:t,...e.style||{}}},[e.size,e.style]);return i.jsx("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,fill:e.color,...e,className:s,style:n,children:i.jsx("path",{d:"M623.709091 46.545455C826.181818 97.745455 977.454545 283.927273 977.454545 505.018182 977.454545 765.672727 768 977.454545 512 977.454545 267.636364 977.454545 67.490909 786.618182 48.872727 542.254545c-2.327273-2.327273-2.327273-4.654545-2.327272-9.30909 0-16.290909 11.636364-27.927273 27.927272-27.927273 13.963636 0 23.272727 9.309091 27.927273 20.945454 51.2 123.345455 172.218182 209.454545 311.854545 209.454546 186.181818 0 337.454545-153.6 337.454546-344.436364 0-121.018182-60.509091-225.745455-153.6-288.581818-9.309091-4.654545-16.290909-16.290909-16.290909-25.6 0-16.290909 13.963636-30.254545 27.927273-30.254545h13.963636z",fill:"#ffffff"})})}F.displayName="IconFontYejianmoshi";F.defaultProps={size:24};const W3=c.memo(F),Y3=["gengduo","shezhi","liangdu","mulu","yejianmoshi"];function Y(e){switch(e.name){case"gengduo":return i.jsx(T3,{...e});case"shezhi":return i.jsx(B3,{...e});case"liangdu":return i.jsx(O3,{...e});case"mulu":return i.jsx(V3,{...e});case"yejianmoshi":return i.jsx(W3,{...e});default:throw new Error(`IconFont's name must one of ${JSON.stringify(Y3)} but got "${e.name}"`)}}Y.defaultProps={size:24};const y=c.memo(Y);function X3(){const e=c3(),s=i3(),[n]=o3(),[t,f]=c.useState(null),o=b3(document),[r,l]=c.useState(""),[u,h]=c.useState(""),[x,v]=c.useState(!1),[b,S]=c.useState(!1),[g,N]=c.useState(n.get("index")?+n.get("index"):-1),L=c.useRef(null),[R,U]=c.useState(0),A=c.useCallback(()=>{requestAnimationFrame(()=>{U(document.documentElement.scrollHeight)})},[]);c.useLayoutEffect(()=>{A()},[A,u]),y3(()=>{b&&S(!1)},[L.current],"click");const H=c.useMemo(()=>decodeURIComponent(atob(n.get("name"))),[n]);c.useEffect(()=>{r3(H).then(a=>f($3(a)))},[H]);const D=c.useMemo(()=>[{label:"目录",icon:i.jsx(y,{name:"mulu",color:"#fff"}),onClick:()=>{v(!1),S(m=>!m)}},{label:"亮度",icon:i.jsx(y,{name:"liangdu",color:"#fff"}),onClick:()=>{}},{label:"夜间模式",icon:i.jsx(y,{name:"yejianmoshi",color:"#fff"}),onClick:()=>{}},{label:"设置",icon:i.jsx(y,{name:"shezhi",color:"#fff"}),onClick:()=>{}}],[]),w=c.useMemo(()=>{const a=o?.top||0,m=R-window.innerHeight;if(m===0)return 100;const j=parseInt(`${a/m*100}`);return Number.isNaN(j)?0:j},[o?.top,R]);c.useEffect(()=>{if(t){if(g===-1){l("前沿"),h(t.description??"还没有简介");return}l(t.sections[g].title),h(t.sections[g].content),window.scrollTo(0,0)}},[g,t,t?.description,t?.sections]);const X=c.useMemo(()=>u.split(`
`).map((a,m)=>i.jsx("p",{children:a.trim().replace(/\s+/g," ")},m)),[u]),G=c.useMemo(()=>t?g<t.sections?.length-1:!1,[g,t]),Z=c.useCallback(()=>{v(!1);const a=Math.max(g-1,-1);N(a);const m=new URLSearchParams(e.search);m.set("index",a+"");const j=m.toString();s({pathname:e.pathname,search:j})},[g,e.pathname,e.search,s]),_=c.useCallback(()=>{if(!t)return;const a=Math.min(g+1,t.sections.length-1);N(a),v(!1);const m=new URLSearchParams(e.search);m.set("index",a+"");const j=m.toString();s({pathname:e.pathname,search:j})},[g,e.pathname,e.search,s,t]),J=c.useCallback(a=>{const m=a.clientX,j=a.clientY,Q=window.innerWidth||document.documentElement.clientWidth,p=window.innerHeight||document.documentElement.clientHeight,e3=Q/2,t3=p/2,q=80;Math.abs(m-e3)<=q&&Math.abs(j-t3)<=q?v(n3=>!n3):v(!1)},[]),K=c.useCallback(()=>{w<95||_()},[_,w]);return i.jsxs("div",{className:d.reader,children:[i.jsx("div",{ref:L,className:E(d.sidebar,b?d.sidebarVisible:void 0),children:i.jsx("ul",{children:t&&t.sections.map((a,m)=>i.jsx("li",{className:E(m===g?d.activeSection:void 0),children:i.jsx("a",{href:"javascript: ",onClick:()=>{N(m),S(!1)},children:a.title.trim().replace(/\s+/," ")})},m))})}),i.jsxs("div",{className:d.header,children:[i.jsx("span",{children:r}),i.jsx(y,{style:{marginRight:4},name:"mulu",color:"#fff",onClick:()=>S(a=>!a)}),i.jsx(y,{name:"gengduo",color:"#fff",onClick:()=>v(a=>!a)})]}),i.jsx("div",{className:d.content,onClick:J,children:X}),i.jsxs("div",{className:d.footer,onClick:K,children:[i.jsx("div",{className:d.inner,style:{width:w+"%"}}),i.jsxs("div",{className:d.text,children:[w,"%"]}),w>95?i.jsx("div",{className:d.nextPage,children:G?"点击加载下一章":"已没有更多"}):null]}),i.jsxs("div",{className:E(d.toolbar,x?d.visible:void 0),children:[i.jsxs("div",{className:d.navigator,children:[i.jsx("div",{onClick:Z,children:"上一章"}),i.jsxs("div",{children:[w,"%"]}),i.jsx("div",{onClick:_,children:"下一章"})]}),i.jsx("ul",{children:D.map(a=>i.jsxs("li",{onClick:a.onClick,children:[a.icon,i.jsx("span",{children:a.label})]},a.label))})]})]})}export{X3 as default};
